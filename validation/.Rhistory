## Visualization script for climate scenarios
library(tidyverse)
library(ggpubr)
###################
#####Aggregate cells
folder = dirname(rstudioapi::getSourceEditorContext()$path)
data_directory = file.path(folder, '..', 'validation')
setwd(data_directory)
data = read_csv('scenario_stats.csv')
data$mean_depth = gsub("-", 'NA', data$mean_depth)
data$max_depth = gsub("-", 'NA', data$max_depth)
data$flooded_area_km2 = gsub("-", 'NA', data$flooded_area_km2)
View(data)
data$mean_depth = as.numeric(as.character(data$mean_depth))
data$max_depth = as.numeric(as.character(data$max_depth))
data$flooded_area_km2 = as.numeric(as.character(data$flooded_area_km2))
data = data %>%
group_by(hazard, #income_group,
climate_scenario, model, year,
return_period, percentile) %>%
summarize(
# mean_depth = mean(mean_depth, na.rm = TRUE),
# max_depth = max(max_depth, na.rm = TRUE),
flooded_area_km2 = sum(flooded_area_km2, na.rm = TRUE)
)
View(data)
folder = dirname(rstudioapi::getSourceEditorContext()$path)
data_directory = file.path(folder, '..', 'validation')
setwd(data_directory)
data = read_csv('scenario_stats.csv')
data$mean_depth = gsub("-", 'NA', data$mean_depth)
data$max_depth = gsub("-", 'NA', data$max_depth)
data$flooded_area_km2 = gsub("-", 'NA', data$flooded_area_km2)
View(data)
## Visualization script for climate scenarios
library(tidyverse)
library(ggpubr)
###################
#####Aggregate cells
folder = dirname(rstudioapi::getSourceEditorContext()$path)
data_directory = file.path(folder, '..', 'validation')
setwd(data_directory)
data = read_csv('scenario_stats.csv')
data$mean_depth = gsub("-", 'NA', data$mean_depth)
data$max_depth = gsub("-", 'NA', data$max_depth)
data$flooded_area_km2 = gsub("-", 'NA', data$flooded_area_km2)
data$mean_depth = as.numeric(as.character(data$mean_depth))
data$max_depth = as.numeric(as.character(data$max_depth))
data$flooded_area_km2 = as.numeric(as.character(data$flooded_area_km2))
country_info = read_csv(file.path(folder, '..', 'data','raw', 'countries.csv'))
View(country_info)
country_info = select(country_info, iso3, flood_region)
data = merge(data,country_info,by="iso3")
View(data)
data = data %>%
group_by(hazard, flood_region, #income_group,
climate_scenario, model, year,
return_period, percentile) %>%
summarize(
# mean_depth = mean(mean_depth, na.rm = TRUE),
# max_depth = max(max_depth, na.rm = TRUE),
flooded_area_km2 = sum(flooded_area_km2, na.rm = TRUE)
)
View(data)
write_csv(data, 'flood_region_scenario_stats.csv')
View(data)
## Visualization script for climate scenarios
library(tidyverse)
library(ggpubr)
###################
#####Aggregate cells
folder = dirname(rstudioapi::getSourceEditorContext()$path)
data_directory = file.path(folder, '..', 'validation')
setwd(data_directory)
data = read_csv('scenario_stats.csv')
data$mean_depth = gsub("-", 'NA', data$mean_depth)
data$max_depth = gsub("-", 'NA', data$max_depth)
data$flooded_area_km2 = gsub("-", 'NA', data$flooded_area_km2)
data$mean_depth = as.numeric(as.character(data$mean_depth))
data$max_depth = as.numeric(as.character(data$max_depth))
data$flooded_area_km2 = as.numeric(as.character(data$flooded_area_km2))
country_info = read_csv(file.path(folder, '..', 'data','raw', 'countries.csv'))
country_info = select(country_info, iso3, flood_region)
data = merge(data,country_info,by="iso3")
data = data %>%
group_by(hazard, flood_region, #income_group,
climate_scenario, model, year,
return_period, percentile) %>%
summarize(
# mean_depth = mean(mean_depth, na.rm = TRUE),
# max_depth = max(max_depth, na.rm = TRUE),
flooded_area_km2 = sum(flooded_area_km2, na.rm = TRUE)
)
write_csv(data, 'flood_region_scenario_stats.csv')
View(data)
data = data[data$hazard == 'inunriver',]
data = data[data$percentile == 'MIROC-ESM-CHEM',]
## Visualization script for climate scenarios
library(tidyverse)
library(ggpubr)
###################
#####Aggregate cells
folder = dirname(rstudioapi::getSourceEditorContext()$path)
data_directory = file.path(folder, '..', 'validation')
setwd(data_directory)
data = read_csv('scenario_stats.csv')
data$mean_depth = gsub("-", 'NA', data$mean_depth)
data$max_depth = gsub("-", 'NA', data$max_depth)
data$flooded_area_km2 = gsub("-", 'NA', data$flooded_area_km2)
data$mean_depth = as.numeric(as.character(data$mean_depth))
data$max_depth = as.numeric(as.character(data$max_depth))
data$flooded_area_km2 = as.numeric(as.character(data$flooded_area_km2))
country_info = read_csv(file.path(folder, '..', 'data','raw', 'countries.csv'))
country_info = select(country_info, iso3, flood_region)
data = merge(data,country_info,by="iso3")
data = data %>%
group_by(hazard, flood_region, #income_group,
climate_scenario, model, year,
return_period, percentile) %>%
summarize(
# mean_depth = mean(mean_depth, na.rm = TRUE),
# max_depth = max(max_depth, na.rm = TRUE),
flooded_area_km2 = sum(flooded_area_km2, na.rm = TRUE)
)
write_csv(data, 'flood_region_scenario_stats.csv')
data = data[data$hazard == 'inunriver',]
data = data[data$model == 'MIROC-ESM-CHEM',]
View(data)
data = data[data$return_period == 'rp01000',]
View(data)
data = data[
data$climate_scenario == 'historical' |
data$climate_scenario == 'rcp4p5' |
data$climate_scenario == "rcp8p5",]
data$climate_scenario = factor(data$climate_scenario,
levels=c("historical","rcp4p5","rcp8p5"),
labels=c("Historical","RCP4.5","RCP8.5")
)
## Visualization script for climate scenarios
library(tidyverse)
library(ggpubr)
###################
#####Aggregate cells
folder = dirname(rstudioapi::getSourceEditorContext()$path)
data_directory = file.path(folder, '..', 'validation')
setwd(data_directory)
data = read_csv('scenario_stats.csv')
data$mean_depth = gsub("-", 'NA', data$mean_depth)
data$max_depth = gsub("-", 'NA', data$max_depth)
data$flooded_area_km2 = gsub("-", 'NA', data$flooded_area_km2)
data$mean_depth = as.numeric(as.character(data$mean_depth))
data$max_depth = as.numeric(as.character(data$max_depth))
data$flooded_area_km2 = as.numeric(as.character(data$flooded_area_km2))
country_info = read_csv(file.path(folder, '..', 'data','raw', 'countries.csv'))
country_info = select(country_info, iso3, flood_region)
data = merge(data,country_info,by="iso3")
data = data %>%
group_by(hazard, flood_region, #income_group,
climate_scenario, model, year,
return_period, percentile) %>%
summarize(
# mean_depth = mean(mean_depth, na.rm = TRUE),
# max_depth = max(max_depth, na.rm = TRUE),
flooded_area_km2 = sum(flooded_area_km2, na.rm = TRUE)
)
write_csv(data, 'flood_region_scenario_stats.csv')
data = data[data$hazard == 'inunriver',]
data = data[data$model == 'MIROC-ESM-CHEM',]
data = data[data$return_period == 'rp01000',]
data = data[
data$climate_scenario == 'historical' |
data$climate_scenario == 'rcp4p5' |
data$climate_scenario == "rcp8p5",]
data$climate_scenario = factor(data$climate_scenario,
levels=c("historical","rcp4p5","rcp8p5"),
labels=c("Historical","RCP4.5","RCP8.5")
)
data = select(data, flood_region, climate_scenario, year, flooded_area_km2)
View(data)
data = select(data, flood_region, climate_scenario, year, flooded_area_km2)
flooded_area_km2 = ungroup()
data = ungroup()
data = data %>% ungroup()
## Visualization script for climate scenarios
library(tidyverse)
library(ggpubr)
###################
#####Aggregate cells
folder = dirname(rstudioapi::getSourceEditorContext()$path)
data_directory = file.path(folder, '..', 'validation')
setwd(data_directory)
data = read_csv('scenario_stats.csv')
data$mean_depth = gsub("-", 'NA', data$mean_depth)
data$max_depth = gsub("-", 'NA', data$max_depth)
data$flooded_area_km2 = gsub("-", 'NA', data$flooded_area_km2)
data$mean_depth = as.numeric(as.character(data$mean_depth))
data$max_depth = as.numeric(as.character(data$max_depth))
data$flooded_area_km2 = as.numeric(as.character(data$flooded_area_km2))
country_info = read_csv(file.path(folder, '..', 'data','raw', 'countries.csv'))
country_info = select(country_info, iso3, flood_region)
data = merge(data,country_info,by="iso3")
data = data %>%
group_by(hazard, flood_region, #income_group,
climate_scenario, model, year,
return_period, percentile) %>%
summarize(
# mean_depth = mean(mean_depth, na.rm = TRUE),
# max_depth = max(max_depth, na.rm = TRUE),
flooded_area_km2 = sum(flooded_area_km2, na.rm = TRUE)
)
data = data %>% ungroup()
write_csv(data, 'flood_region_scenario_stats.csv')
data = data[data$hazard == 'inunriver',]
data = data[data$model == 'MIROC-ESM-CHEM',]
data = data[data$return_period == 'rp01000',]
data = data[
data$climate_scenario == 'historical' |
data$climate_scenario == 'rcp4p5' |
data$climate_scenario == "rcp8p5",]
data$climate_scenario = factor(data$climate_scenario,
levels=c("historical","rcp4p5","rcp8p5"),
labels=c("Historical","RCP4.5","RCP8.5")
)
data = select(data, flood_region, climate_scenario, year, flooded_area_km2)
View(data)
data$flooded_area_km2 = data$flooded_area_km2 / 1e6
ggplot(data, aes(x=year, y=flooded_area_km2, group=climate_scenario)) +
geom_line(aes(linetype=climate_scenario))+
geom_point(aes(shape=climate_scenario)) +
facet_wrap(~flood_region) #, ncol=4, nrow=1
ggplot(data, aes(x=year, y=flooded_area_km2,
group=climate_scenario, color=climate_scenario)) +
geom_line(aes(linetype=climate_scenario))+
geom_point(aes(shape=climate_scenario)) +
facet_wrap(~flood_region) #, ncol=4, nrow=1
